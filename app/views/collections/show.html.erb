<% activate_nav!(:collections) %>
<%- title @collection.name %>
<%= render "shared/nav" %>

<% if @collection.photo.url.blank? %>
<header class="col-7 container text-center">
  <h1 class="ib m0"><%= @collection.name %></h1>
  <a href="#editCollection" class="edit-btn modalTrigger">
    <%= inline_svg("edit.svg") %>
  </a>
  <p class="text m1-btm"><%= @collection.description %></p>
</header>
<% else %>
<header class="collection-header has-img" style="background-image:url(<%= @collection.photo.url %>)">
  <div class="col-10 center collection-header-container">
    <h1 class="collection-name ib"><%= @collection.name %></h1>
    <a href="#editCollection" class="edit-btn-glass modalTrigger">
      <%= inline_svg("edit.svg") %>
    </a>
    <% unless @collection.description.blank? %>
    <p class="collection-description lead"><%= @collection.description %></p>
    <% end %>
  </div>
</header>
<% end %>

<article class="col-7 recipe-list">
  <% if @recipes.any? %>
    <%= render partial: "recipes/recipe", collection: @recipes, cache: true %>
  <% else %>
  <div class="panel col-6 center">
    You don't have any recipes in this collection yet. <%= link_to "Go add some!", recipes_path %>
  </div>
  <% end %>
</article>

<div class="modal" id="editCollection">
  <%= react_component("ModalClose") %>
  <h2>Edit Collection</h2>
  <hr>
  <%= form_for(@collection) do |f| %>
    <%= f.label :name %>
    <%= f.text_field :name, class: "text-input", placeholder: "Spectacular Desserts" %>

    <%= f.label :description %>
    <%= f.text_area :description, class: "text-input", placeholder: "The best food to end your meal." %>

    <br>
    <%= f.label :photo, class: "ib" %><small class="m-small-left">(optional)</small>
    <%= f.file_field :photo, class: "line-height-reset" %>

    <%= f.submit "Save", class: "btn-blue float-right" %>
  <% end %>
</div>
