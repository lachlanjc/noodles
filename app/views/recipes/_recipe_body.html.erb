<h2 class="mt2">Ingredients</h1>
<div class="text text-normalized recipe-ingredients" itemprop="ingredients">
  <% @recipe.ingredients.lines.each do |line| %>
    <%= ingredient_processed(line).html_safe %>
  <% end %>
</div>

<h2 class="mt2">Instructions</h2>
<div class="text text-normalized" itemprop="recipeInstructions">
  <%= sanitize markdown(@recipe.instructions) %>
</div>

<%= image_tag @recipe.img, alt: "Photo of " + @recipe.title, class: "mt2 mb2 mx-auto rounded", itemprop: "image" unless @recipe.img.url.blank? %>

<h2 class="mt2">Details</h2>
<% if @recipe.source.present? || @recipe.serves.present? %>
  <% if @recipe.serves.present? %>
    <p>Source: <%= auto_link(@recipe.source, :html => {:rel => "nofollow"}) %>
  <% end %>
  <%= content_tag :p, "Author: #{@recipe.author}" if @recipe.author.present? %>
  <% if @recipe.serves.present? %>
    <p itemprop="recipeYield">Yield: <%= @recipe.serves %>
  <% end %>
<% else %>
  <p class="grey-2">No details for this recipe. Details describe where the recipe came from and the recipe's yield.</p>
<% end %>

<div class="hide print-show">
  <% unless @recipe.notes.blank? %>
    <h2>Notes</h2>
    <%= sanitize markdown(@recipe.notes) %>
  <% end %>
</div>

<% if me_owns_recipe? %>
  <%= react_component("NoteEditor", recipe_id: @recipe.id) %>
<% else %>
  <div class="rounded border p2 notes text text-normalized">
    <% if @recipe.notes.blank? %>
    <p class="grey-4 mb0">No notes for this recipe &mdash; yet!</p>
    <% else %>
    <%= sanitize markdown(@recipe.notes) %>
    <% end %>
  </div>
<% end %>
