<% activate_nav!(:edit_recipe) %>

<%= stylesheet_link_tag "editor" %>
<%= javascript_include_tag "editor" %>

<%= link_to root_url, class: "logo-nav" do %>
  <%= inline_svg("home.svg") %>
<% end %>

<article class="col-7 container">
  <%= form_for(@recipe) do |f| %>

  <% if @recipe.img.url.blank? %>
  <%= f.file_field :img, id: "file", class: "hide" %>
  <div class="upload-button m0" id="file-button">
    <%= inline_svg("photo-upload.svg") %>
    <span id="file-name">Click to upload a photo</span>
  </div>
  <% else %>
  <%= f.file_field :img, id: "file", class: "hide" %>
  <div class="upload-button m0">
    <div id="file-button" class="ib">
      <%= inline_svg("photo-upload.svg") %>
      <span id="file-name">Pick a different photo?</span>
    </div>
    <span>or <%= link_to "remove current photo", recipe_remove_image_path(:recipe_id => @recipe.id) %></span>
  </div>
  <% end %>

  <% if @recipe.errors.any? %>
  <div class="flash-danger bg-white rounded shadow mb2 p2">
    <h2>Oops! You need to title the recipe.</h2>
    <p>Click below and type a name for your recipe.</p>
  </div>
  <% end %>

  <%= f.text_field :title, autofocus: true, required: true, class: "text-input invisible-input full-width m0 bold h1", placeholder: "Click here and title your recipe...", autocomplete: "off" %>

  <%= f.text_area :description, class: "text-input invisible-input full-width js-auto-size", placeholder: "Optionally, write a description for the recipe right here.", rows: "1", autocomplete: "off" %>

  <%= f.text_area :ingredients, class: "text-input invisible-input full-width m0 js-auto-size", placeholder: "Click here to add your recipe\'s ingredients. Put one on each line.", rows: "3", autocomplete: "off" %>

  <%= f.text_area :instructions, class: "text-input invisible-input full-width m0 js-auto-size", placeholder: "Type the recipe\'s instructions here. Number each step.", rows: "4", autocomplete: "off" %>

  <p class="grey-4 block mb2 details-btn">
    <%= inline_svg("info_outline.svg") %>
    Show Details
  </p>

  <div class="hide bg-white rounded shadow mb2 p2 details-panel">
    <h2 class="m0">Details</h2>

    <%= f.label :source, class: "ib mt2" %><small class="ml1 grey-4">Where did this recipe come from?</small>
    <%= f.text_field :source, class: "text-input" %>

    <%= f.label :serves, "Yield", class: "ib" %><small class="ml1 grey-4">How many servings does your recipe produce?</small>
    <%= f.text_field :serves, class: "text-input" %>

    <%= f.label :notes, class: "ib" %><small class="ml1 grey-4">Add some more information about the recipe.</small>
    <%= f.text_area :notes, class: "text-input mb1 notes js-auto-size" %>

    <div>
      <label class="control mb2">
        <%= f.check_box :favorite %>
        <div class="control-indicator fill-primary">
          <%= inline_svg("favorite_outline.svg") %>
        </div>
        <div class="control-indicator-checked fill-primary">
          <%= inline_svg("favorite.svg") %>
        </div>
        <span class="text-primary"><%= t("general.favorite") %></span>
      </label>
    </div>

    <%= link_to t("general.delete"), @recipe, method: :delete, data: { confirm: t("general.delete_forever") }, class: "btn-red btn-sm mt2" %>
  </div>

  <%= f.submit t("general.save"), class: "btn btn-save mb2", data: { disable_with: "Saving..." } %>

  <% end %>
</article>
